{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Route,Routes,Navigate,useLocation}from'react-router-dom';import Navbar from'./components/Navbar';import Login from'./components/Login';import Dashboard from'./components/Dashboard';import CreateShift from'./components/CreateShift';import CreateUser from'./components/CreateUser';import EditUser from'./components/EditUser';import Settings from'./components/Settings';import AttendanceUpload from'./components/AttendanceUpload';import MonthlySalaryReport from'./components/MonthlySalaryReport';import MonthlyBonusReport from'./components/MonthlyBonusReport';import Violations from'./components/Violations';import CreateAdvance from'./components/CreateAdvance';import socket from'./socket';// استيراد الـ Socket.IO\n// مكون مساعد لتسجيل المسار الحالي\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const RouteLogger=()=>{const location=useLocation();useEffect(()=>{console.log('التنقل إلى المسار:',location.pathname);if(location.pathname==='/attendance-upload'){console.log('تم الوصول إلى مسار رفع البصمة');}},[location]);return null;};function App(){const[isAuthenticated,setIsAuthenticated]=useState(!!localStorage.getItem('token'));useEffect(()=>{// تسجيل حالة المصادقة عند تحميل التطبيق\nconst token=localStorage.getItem('token');console.log('التوكن:',token,'isAuthenticated:',isAuthenticated);// إرسال رسالة إلى الـ backend عند الاتصال إذا كان المستخدم مصادقًا\nif(isAuthenticated){socket.emit('message','Frontend connected!');}// تنظيف عند إغلاق التطبيق\nreturn()=>{socket.off('message');};},[isAuthenticated]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"font-noto-sans-arabic\",children:[/*#__PURE__*/_jsx(RouteLogger,{}),isAuthenticated&&/*#__PURE__*/_jsx(Navbar,{setIsAuthenticated:setIsAuthenticated}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"}):/*#__PURE__*/_jsx(Login,{setIsAuthenticated:setIsAuthenticated})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:isAuthenticated?/*#__PURE__*/_jsx(Dashboard,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/create-shift\",element:isAuthenticated?/*#__PURE__*/_jsx(CreateShift,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/create-user\",element:isAuthenticated?/*#__PURE__*/_jsx(CreateUser,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/edit-user\",element:isAuthenticated?/*#__PURE__*/_jsx(EditUser,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:isAuthenticated?/*#__PURE__*/_jsx(Settings,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/attendance-upload\",element:isAuthenticated?/*#__PURE__*/_jsxs(_Fragment,{children:[console.log('دخول إلى /attendance-upload، isAuthenticated:',isAuthenticated),/*#__PURE__*/_jsx(AttendanceUpload,{socket:socket,isAuthenticated:isAuthenticated})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/monthly-salary-report\",element:isAuthenticated?/*#__PURE__*/_jsx(MonthlySalaryReport,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/monthly-bonus-report\",element:isAuthenticated?/*#__PURE__*/_jsx(MonthlyBonusReport,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/violations\",element:isAuthenticated?/*#__PURE__*/_jsx(Violations,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/create-advance\",element:isAuthenticated?/*#__PURE__*/_jsx(CreateAdvance,{socket:socket}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:isAuthenticated?\"/dashboard\":\"/login\"})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Navigate","useLocation","Navbar","Login","Dashboard","CreateShift","CreateUser","EditUser","Settings","AttendanceUpload","MonthlySalaryReport","MonthlyBonusReport","Violations","CreateAdvance","socket","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","RouteLogger","location","console","log","pathname","App","isAuthenticated","setIsAuthenticated","localStorage","getItem","token","emit","off","children","className","path","element","to"],"sources":["/root/NileMIX-System_HR/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Route, Routes, Navigate, useLocation } from 'react-router-dom';\nimport Navbar from './components/Navbar';\nimport Login from './components/Login';\nimport Dashboard from './components/Dashboard';\nimport CreateShift from './components/CreateShift';\nimport CreateUser from './components/CreateUser';\nimport EditUser from './components/EditUser';\nimport Settings from './components/Settings';\nimport AttendanceUpload from './components/AttendanceUpload';\nimport MonthlySalaryReport from './components/MonthlySalaryReport';\nimport MonthlyBonusReport from './components/MonthlyBonusReport';\nimport Violations from './components/Violations';\nimport CreateAdvance from './components/CreateAdvance';\nimport socket from './socket'; // استيراد الـ Socket.IO\n\n// مكون مساعد لتسجيل المسار الحالي\nconst RouteLogger = () => {\n  const location = useLocation();\n  useEffect(() => {\n    console.log('التنقل إلى المسار:', location.pathname);\n    if (location.pathname === '/attendance-upload') {\n      console.log('تم الوصول إلى مسار رفع البصمة');\n    }\n  }, [location]);\n  return null;\n};\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(!!localStorage.getItem('token'));\n\n  useEffect(() => {\n    // تسجيل حالة المصادقة عند تحميل التطبيق\n    const token = localStorage.getItem('token');\n    console.log('التوكن:', token, 'isAuthenticated:', isAuthenticated);\n    // إرسال رسالة إلى الـ backend عند الاتصال إذا كان المستخدم مصادقًا\n    if (isAuthenticated) {\n      socket.emit('message', 'Frontend connected!');\n    }\n    // تنظيف عند إغلاق التطبيق\n    return () => {\n      socket.off('message');\n    };\n  }, [isAuthenticated]);\n\n  return (\n    <Router>\n      <div className=\"font-noto-sans-arabic\">\n        {/* تسجيل المسار الحالي */}\n        <RouteLogger />\n        {/* عرض شريط التنقل إذا كان المستخدم مصادقًا */}\n        {isAuthenticated && <Navbar setIsAuthenticated={setIsAuthenticated} />}\n        <Routes>\n          <Route\n            path=\"/login\"\n            element={isAuthenticated ? <Navigate to=\"/dashboard\" /> : <Login setIsAuthenticated={setIsAuthenticated} />}\n          />\n          <Route\n            path=\"/dashboard\"\n            element={isAuthenticated ? <Dashboard socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            path=\"/create-shift\"\n            element={isAuthenticated ? <CreateShift socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            path=\"/create-user\"\n            element={isAuthenticated ? <CreateUser socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            path=\"/edit-user\"\n            element={isAuthenticated ? <EditUser socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            path=\"/settings\"\n            element={isAuthenticated ? <Settings socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            path=\"/attendance-upload\"\n            element={\n              isAuthenticated ? (\n                <>\n                  {console.log('دخول إلى /attendance-upload، isAuthenticated:', isAuthenticated)}\n                  <AttendanceUpload socket={socket} isAuthenticated={isAuthenticated} />\n                </>\n              ) : (\n                <Navigate to=\"/login\" />\n              )\n            }\n          />\n          <Route\n            path=\"/monthly-salary-report\"\n            element={isAuthenticated ? <MonthlySalaryReport socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            path=\"/monthly-bonus-report\"\n            element={isAuthenticated ? <MonthlyBonusReport socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            path=\"/violations\"\n            element={isAuthenticated ? <Violations socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            path=\"/create-advance\"\n            element={isAuthenticated ? <CreateAdvance socket={socket} /> : <Navigate to=\"/login\" />}\n          />\n          <Route path=\"*\" element={<Navigate to={isAuthenticated ? \"/dashboard\" : \"/login\"} />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}