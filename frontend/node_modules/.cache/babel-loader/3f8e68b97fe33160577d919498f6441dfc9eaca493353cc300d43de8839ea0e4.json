{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Search,Percent,DollarSign,Utensils,Shield,Briefcase,Calendar,Edit2,Trash2}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CustomCheckIcon=()=>/*#__PURE__*/_jsxs(motion.div,{className:\"relative h-12 w-12 sm:h-16 sm:w-16\",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,transition:{duration:0.6,ease:'easeInOut',type:'spring',stiffness:150,damping:12}},exit:{scale:0,opacity:0,transition:{duration:0.4,ease:'easeIn'}},children:[/*#__PURE__*/_jsx(motion.svg,{className:\"h-full w-full text-purple-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",strokeWidth:3,initial:{pathLength:0,rotate:-45},animate:{pathLength:1,rotate:0,transition:{duration:0.8,ease:'easeInOut'}},children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M5 13l4 4L19 7\"})}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute inset-0 rounded-full bg-purple-100 opacity-40\",initial:{scale:0},animate:{scale:1.8,opacity:0,transition:{duration:1.2,ease:'easeOut'}}})]});const CustomLoadingSpinner=()=>/*#__PURE__*/_jsxs(motion.div,{className:\"flex items-center justify-center\",initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1,transition:{duration:0.4,ease:'easeIn'}},exit:{opacity:0,scale:0.8,transition:{duration:0.4,ease:'easeOut'}},children:[/*#__PURE__*/_jsx(motion.div,{className:\"h-8 w-8 sm:h-10 sm:w-10 border-4 border-purple-600 border-t-transparent rounded-full\",animate:{rotate:360},transition:{duration:1,repeat:Infinity,ease:'linear'}}),/*#__PURE__*/_jsx(\"span\",{className:\"mr-2 sm:mr-3 text-purple-600 text-xs sm:text-sm font-medium\",children:\"\\u062C\\u0627\\u0631\\u064D \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})]});function EditUser(){const[users,setUsers]=useState([]);const[filteredUsers,setFilteredUsers]=useState([]);const[shifts,setShifts]=useState([]);const[searchQuery,setSearchQuery]=useState('');const[excludedUsers,setExcludedUsers]=useState([]);const[modal,setModal]=useState({isOpen:false,type:'',userId:null,formData:{totalSalaryWithAllowances:'',basicSalary:'',bonusPercentage:'',basicBonus:'',mealAllowance:'',medicalInsurance:'',socialInsurance:'',annualLeaveBalance:'',percentageIncreaseTotal:'',percentageIncreaseBasic:'',password:'',netSalaryPreview:''},applyToAll:false,selectedShift:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[successMessage,setSuccessMessage]=useState('');const[showSuccessAnimation,setShowSuccessAnimation]=useState(false);const[showDeleteConfirm,setShowDeleteConfirm]=useState({isOpen:false,userId:null,userName:''});useEffect(()=>{const fetchData=async()=>{setLoading(true);try{const usersResponse=await fetch(`${process.env.REACT_APP_API_URL}/api/user`,{headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`}});if(!usersResponse.ok){throw new Error(`فشل جلب الموظفين! حالة HTTP: ${usersResponse.status}`);}const usersData=await usersResponse.json();setUsers(usersData);setFilteredUsers(usersData);}catch(err){console.error('خطأ في جلب الموظفين:',err);setError(`حدث خطأ أثناء جلب بيانات الموظفين: ${err.message}`);}try{const shiftsResponse=await fetch(`${process.env.REACT_APP_API_URL}/api/shift`,{headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`}});if(!shiftsResponse.ok){console.warn(`فشل جلب الشيفتات! حالة HTTP: ${shiftsResponse.status}`);setError(`حدث خطأ في جلب الشيفتات: ${shiftsResponse.statusText||'خطأ داخلي'}`);setShifts([]);}else{const shiftsData=await shiftsResponse.json();setShifts(shiftsData);}}catch(shiftErr){console.warn('خطأ في جلب الشيفتات:',shiftErr.message);setError(`حدث خطأ في جلب الشيفتات: ${shiftErr.message}`);setShifts([]);}finally{setLoading(false);}};fetchData();},[]);useEffect(()=>{let result=users;if(searchQuery){result=result.filter(user=>user.employeeCode.toLowerCase().includes(searchQuery.toLowerCase())||user.name.toLowerCase().includes(searchQuery.toLowerCase()));}setFilteredUsers(result);},[searchQuery,users]);const openModal=(type,userId=null,userData={})=>{var _userData$shiftType;const netSalary=userData.totalSalaryWithAllowances!=null?((parseFloat(userData.totalSalaryWithAllowances)||0)+(parseFloat(userData.basicBonus)||0)*(parseFloat(userData.bonusPercentage)||0)/100+(parseFloat(userData.mealAllowance)||0)-(parseFloat(userData.medicalInsurance)||0)-(parseFloat(userData.socialInsurance)||0)).toFixed(2):'0.00';setModal({isOpen:true,type,userId,formData:{totalSalaryWithAllowances:userData.totalSalaryWithAllowances!=null?userData.totalSalaryWithAllowances.toString():'',basicSalary:userData.basicSalary!=null?userData.basicSalary.toString():'',bonusPercentage:userData.bonusPercentage!=null?userData.bonusPercentage.toString():'',basicBonus:userData.basicBonus!=null?userData.basicBonus.toString():'',mealAllowance:userData.mealAllowance!=null?userData.mealAllowance.toString():'',medicalInsurance:userData.medicalInsurance!=null?userData.medicalInsurance.toString():'',socialInsurance:userData.socialInsurance!=null?userData.socialInsurance.toString():'',annualLeaveBalance:userData.annualLeaveBalance!=null?userData.annualLeaveBalance.toString():'',percentageIncreaseTotal:'',percentageIncreaseBasic:'',password:'',netSalaryPreview:netSalary},applyToAll:false,selectedShift:((_userData$shiftType=userData.shiftType)===null||_userData$shiftType===void 0?void 0:_userData$shiftType._id)||''});};const closeModal=()=>{setModal({isOpen:false,type:'',userId:null,formData:{totalSalaryWithAllowances:'',basicSalary:'',bonusPercentage:'',basicBonus:'',mealAllowance:'',medicalInsurance:'',socialInsurance:'',annualLeaveBalance:'',percentageIncreaseTotal:'',percentageIncreaseBasic:'',password:'',netSalaryPreview:''},applyToAll:false,selectedShift:''});};const openDeleteConfirm=(userId,userName)=>{setShowDeleteConfirm({isOpen:true,userId,userName});};const closeDeleteConfirm=()=>{setShowDeleteConfirm({isOpen:false,userId:null,userName:''});};const handleExcludeToggle=userId=>{setExcludedUsers(prev=>prev.includes(userId)?prev.filter(id=>id!==userId):[...prev,userId]);};const calculateNetSalaryPreview=()=>{const{formData}=modal;const ts=parseFloat(formData.totalSalaryWithAllowances)||0;const bb=parseFloat(formData.basicBonus)||0;const bp=parseFloat(formData.bonusPercentage)||0;const ma=parseFloat(formData.mealAllowance)||0;const mi=parseFloat(formData.medicalInsurance)||0;const si=parseFloat(formData.socialInsurance)||0;const net=ts+bb*bp/100+ma-mi-si;setModal({...modal,formData:{...modal.formData,netSalaryPreview:net.toFixed(2)}});};const handleUpdate=async()=>{const{type,userId,formData,applyToAll,selectedShift}=modal;setLoading(true);setError('');try{const updates={};const user=users.find(u=>u._id===userId);if(type==='edit'){updates.totalSalaryWithAllowances=formData.totalSalaryWithAllowances?parseFloat(formData.totalSalaryWithAllowances):(user===null||user===void 0?void 0:user.totalSalaryWithAllowances)||0;updates.basicSalary=formData.basicSalary?parseFloat(formData.basicSalary):(user===null||user===void 0?void 0:user.basicSalary)||0;updates.bonusPercentage=formData.bonusPercentage?parseFloat(formData.bonusPercentage):(user===null||user===void 0?void 0:user.bonusPercentage)||0;updates.basicBonus=formData.basicBonus?parseFloat(formData.basicBonus):(user===null||user===void 0?void 0:user.basicBonus)||0;updates.mealAllowance=formData.mealAllowance?parseFloat(formData.mealAllowance):(user===null||user===void 0?void 0:user.mealAllowance)||0;updates.medicalInsurance=formData.medicalInsurance?parseFloat(formData.medicalInsurance):(user===null||user===void 0?void 0:user.medicalInsurance)||0;updates.socialInsurance=formData.socialInsurance?parseFloat(formData.socialInsurance):(user===null||user===void 0?void 0:user.socialInsurance)||0;updates.annualLeaveBalance=formData.annualLeaveBalance?parseInt(formData.annualLeaveBalance):(user===null||user===void 0?void 0:user.annualLeaveBalance)||0;updates.netSalary=parseFloat((updates.totalSalaryWithAllowances||0)+(updates.basicBonus||0)*(updates.bonusPercentage||0)/100+(updates.mealAllowance||0)-(updates.medicalInsurance||0)-(updates.socialInsurance||0)).toFixed(2);if(formData.password)updates.password=formData.password;const response=await fetch(`${process.env.REACT_APP_API_URL}/api/user/update/${userId}`,{method:'PUT',headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify(updates)});if(!response.ok)throw new Error(`فشل التحديث! حالة HTTP: ${response.status}`);}else if(type==='percentageIncreaseTotal'){if(!formData.percentageIncreaseTotal||isNaN(formData.percentageIncreaseTotal)||formData.percentageIncreaseTotal<0){setError('يرجى إدخال نسبة زيادة على الراتب الإجمالي صحيحة');setLoading(false);return;}const percentage=parseFloat(formData.percentageIncreaseTotal);if(applyToAll){await fetch(`${process.env.REACT_APP_API_URL}/api/user/update-many`,{method:'PUT',headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({annualIncreasePercentage:percentage,shiftType:selectedShift||undefined,excludedUsers})});}else if(userId){const user=users.find(u=>u._id===userId);updates.totalSalaryWithAllowances=(user.totalSalaryWithAllowances||0)*(1+percentage/100);updates.netSalary=parseFloat(updates.totalSalaryWithAllowances+(user.basicBonus||0)*(user.bonusPercentage||0)/100+(user.mealAllowance||0)-(user.medicalInsurance||0)-(user.socialInsurance||0)).toFixed(2);await fetch(`${process.env.REACT_APP_API_URL}/api/user/update/${userId}`,{method:'PUT',headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify(updates)});}}else if(type==='percentageIncreaseBasic'){if(!formData.percentageIncreaseBasic||isNaN(formData.percentageIncreaseBasic)||formData.percentageIncreaseBasic<0){setError('يرجى إدخال نسبة زيادة على الراتب الأساسي صحيحة');setLoading(false);return;}const percentage=parseFloat(formData.percentageIncreaseBasic);if(applyToAll){await fetch(`${process.env.REACT_APP_API_URL}/api/user/update-many`,{method:'PUT',headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({basicIncreasePercentage:percentage,shiftType:selectedShift||undefined,excludedUsers})});}else if(userId){const user=users.find(u=>u._id===userId);updates.basicSalary=(user.basicSalary||0)*(1+percentage/100);await fetch(`${process.env.REACT_APP_API_URL}/api/user/update/${userId}`,{method:'PUT',headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify(updates)});}}else{updates[type]=type==='annualLeaveBalance'?parseInt(formData[type]):parseFloat(formData[type]);if(['bonusPercentage','basicBonus','mealAllowance','medicalInsurance','socialInsurance'].includes(type)){const user=users.find(u=>u._id===userId)||{};const ts=user.totalSalaryWithAllowances||0;const bb=updates.basicBonus||user.basicBonus||0;const bp=updates.bonusPercentage||user.bonusPercentage||0;const ma=updates.mealAllowance||user.mealAllowance||0;const mi=updates.medicalInsurance||user.medicalInsurance||0;const si=updates.socialInsurance||user.socialInsurance||0;updates.netSalary=parseFloat(ts+bb*bp/100+ma-mi-si).toFixed(2);}if(!updates[type]||isNaN(updates[type])||updates[type]<0){setError('يرجى إدخال قيمة صحيحة وغير سالبة');setLoading(false);return;}await fetch(`${process.env.REACT_APP_API_URL}/api/user/update-many`,{method:'PUT',headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({updates,shiftType:applyToAll?selectedShift:undefined,excludedUsers:applyToAll?excludedUsers:undefined})});}const usersResponse=await fetch(`${process.env.REACT_APP_API_URL}/api/user`,{headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`}});if(!usersResponse.ok){throw new Error(`فشل جلب الموظفين بعد التحديث! حالة HTTP: ${usersResponse.status}`);}const usersData=await usersResponse.json();setUsers(usersData);setFilteredUsers(usersData);setExcludedUsers([]);setSuccessMessage(type==='edit'?'تم تعديل الموظف بنجاح':'تم تحديث البيانات بنجاح');setShowSuccessAnimation(true);setTimeout(()=>{setShowSuccessAnimation(false);setSuccessMessage('');},2000);closeModal();}catch(err){console.error('خطأ في تحديث البيانات:',err);setError(`حدث خطأ أثناء التحديث: ${err.message}`);}finally{setLoading(false);}};const handleDelete=async()=>{const{userId}=showDeleteConfirm;setLoading(true);setError('');try{const response=await fetch(`${process.env.REACT_APP_API_URL}/api/user/delete/${userId}`,{method:'DELETE',headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`}});if(!response.ok){throw new Error(`فشل حذف الموظف! حالة HTTP: ${response.status}`);}const usersResponse=await fetch(`${process.env.REACT_APP_API_URL}/api/user`,{headers:{'Content-Type':'application/json',Authorization:`Bearer ${localStorage.getItem('token')}`}});if(!usersResponse.ok){throw new Error(`فشل جلب الموظفين بعد الحذف! حالة HTTP: ${usersResponse.status}`);}const usersData=await usersResponse.json();setUsers(usersData);setFilteredUsers(usersData);setSuccessMessage('تم حذف الموظف بنجاح');setShowSuccessAnimation(true);setTimeout(()=>{setShowSuccessAnimation(false);setSuccessMessage('');},2000);closeDeleteConfirm();}catch(err){console.error('خطأ في حذف الموظف:',err);setError(`حدث خطأ أثناء الحذف: ${err.message}`);}finally{setLoading(false);}};const handleShiftChange=e=>{const selectedShiftId=e.target.value;setModal({...modal,selectedShift:selectedShiftId});const selectedShift=shifts.find(shift=>shift._id===selectedShiftId);if(selectedShift){const workDaysValue=Array.isArray(selectedShift.workDays)?selectedShift.workDays.length:selectedShift.workDays||30;setModal({...modal,formData:{...modal.formData,workDays:workDaysValue.toString()}});}else{setModal({...modal,formData:{...modal.formData,workDays:''}});}};const buttonVariants={hover:{scale:1.05,boxShadow:'0 6px 25px rgba(139, 92, 246, 0.3)',transition:{duration:0.3,ease:'easeInOut'}},tap:{scale:0.95,backgroundColor:'#A78BFA',transition:{duration:0.3,ease:'easeInOut'}}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-purple-100 via-purple-50 to-blue-100 p-2 sm:p-4 md:p-6 font-noto-sans-arabic relative overflow-hidden dir=rtl\",style:{scrollBehavior:'smooth'},children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto max-w-7xl\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,ease:'easeOut'},className:\"bg-white rounded-2xl shadow-md p-4 sm:p-6 border border-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl sm:text-2xl md:text-3xl font-bold text-purple-600 mb-4 sm:mb-6 text-right tracking-wide drop-shadow-sm\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u062D\\u0633\\u0627\\u0628\"}),/*#__PURE__*/_jsxs(AnimatePresence,{children:[error&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:0.3},className:\"bg-red-100 text-red-700 p-2 sm:p-3 rounded-xl mb-4 sm:mb-6 text-right text-xs sm:text-sm font-semibold shadow-sm\",children:error}),successMessage&&!loading&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:0.3},className:\"bg-purple-50 text-purple-600 p-2 sm:p-3 rounded-xl mb-4 sm:mb-6 text-right text-xs sm:text-sm font-semibold shadow-sm\",children:successMessage})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-4 sm:mb-6\",children:/*#__PURE__*/_jsx(CustomLoadingSpinner,{})}),!loading&&users.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 sm:mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative max-w-full sm:max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-purple-600\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"\\u0627\\u0628\\u062D\\u062B \\u0628\\u0643\\u0648\\u062F \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641 \\u0623\\u0648 \\u0627\\u0644\\u0627\\u0633\\u0645\",className:\"w-full px-3 sm:px-4 py-2 sm:py-3 pr-8 sm:pr-10 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading})]})}),!loading&&users.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 mb-4 sm:mb-6 max-w-5xl mx-auto\",children:[{type:'percentageIncreaseTotal',label:'زيادة نسبة على الراتب الإجمالي',icon:Percent},{type:'percentageIncreaseBasic',label:'زيادة نسبة على الراتب الأساسي',icon:Percent},{type:'bonusPercentage',label:'نسبة الحافز',icon:Percent},{type:'basicBonus',label:'حافز أساسي',icon:DollarSign},{type:'mealAllowance',label:'بدل وجبة',icon:Utensils},{type:'medicalInsurance',label:'تأمين طبي',icon:Shield},{type:'socialInsurance',label:'تأمين اجتماعي',icon:Briefcase},{type:'annualLeaveBalance',label:'رصيد الإجازة',icon:Calendar}].map(({type,label,icon:Icon})=>/*#__PURE__*/_jsxs(motion.button,{variants:buttonVariants,whileHover:\"hover\",whileTap:\"tap\",onClick:()=>openModal(type),className:\"flex items-center justify-center space-x-2 space-x-reverse bg-purple-600 text-white px-2 sm:px-3 py-2 rounded-lg hover:bg-purple-700 transition-all duration-300 text-xs sm:text-sm font-semibold shadow-md w-full text-center\",disabled:loading,children:[/*#__PURE__*/_jsx(Icon,{className:\"h-4 w-4 sm:h-5 sm:w-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate\",children:label})]},type))}),!loading&&users.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-md border border-gray-100 overflow-x-auto lg:overflow-x-visible max-w-full\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-right text-xs sm:text-sm table-auto\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-purple-50\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[4%] min-w-[40px] font-semibold text-purple-600\",children:\"\\u0627\\u0633\\u062A\\u062B\\u0646\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[9%] min-w-[70px] font-semibold text-purple-600\",children:\"\\u0627\\u0644\\u0627\\u0633\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0627\\u0644\\u0642\\u0633\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0627\\u0644\\u0634\\u064A\\u0641\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0627\\u0644\\u0623\\u0633\\u0627\\u0633\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0641\\u0632 \\u0627\\u0644\\u0623\\u0633\\u0627\\u0633\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u062D\\u0627\\u0641\\u0632\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0628\\u062F\\u0644 \\u0627\\u0644\\u0648\\u062C\\u0628\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0627\\u0644\\u062A\\u0623\\u0645\\u064A\\u0646 \\u0627\\u0644\\u0637\\u0628\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0627\\u0644\\u062A\\u0623\\u0645\\u064A\\u0646 \\u0627\\u0644\\u0627\\u062C\\u062A\\u0645\\u0627\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\",children:\"\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0625\\u062C\\u0627\\u0632\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2 sm:p-3 w-[10%] min-w-[90px] font-semibold text-purple-600\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredUsers.map(user=>{var _user$shiftType,_user$totalSalaryWith,_user$basicSalary,_user$basicBonus,_user$bonusPercentage,_user$mealAllowance,_user$medicalInsuranc,_user$socialInsurance,_user$annualLeaveBala;return/*#__PURE__*/_jsxs(motion.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0.3},className:\"border-b border-purple-100 hover:bg-purple-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:excludedUsers.includes(user._id),onChange:()=>handleExcludeToggle(user._id),className:\"h-4 w-4 text-purple-600 focus:ring-purple-500 rounded\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:user.employeeCode}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:user.name}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:user.department}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:((_user$shiftType=user.shiftType)===null||_user$shiftType===void 0?void 0:_user$shiftType.shiftName)||'غير محدد'}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:((_user$totalSalaryWith=user.totalSalaryWithAllowances)!==null&&_user$totalSalaryWith!==void 0?_user$totalSalaryWith:0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:((_user$basicSalary=user.basicSalary)!==null&&_user$basicSalary!==void 0?_user$basicSalary:0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:((_user$basicBonus=user.basicBonus)!==null&&_user$basicBonus!==void 0?_user$basicBonus:0).toFixed(2)}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-2 sm:p-3\",children:[((_user$bonusPercentage=user.bonusPercentage)!==null&&_user$bonusPercentage!==void 0?_user$bonusPercentage:0).toFixed(2),\"%\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:((_user$mealAllowance=user.mealAllowance)!==null&&_user$mealAllowance!==void 0?_user$mealAllowance:0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:((_user$medicalInsuranc=user.medicalInsurance)!==null&&_user$medicalInsuranc!==void 0?_user$medicalInsuranc:0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:((_user$socialInsurance=user.socialInsurance)!==null&&_user$socialInsurance!==void 0?_user$socialInsurance:0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 sm:p-3\",children:(_user$annualLeaveBala=user.annualLeaveBalance)!==null&&_user$annualLeaveBala!==void 0?_user$annualLeaveBala:0}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-2 sm:p-3 flex space-x-1 space-x-reverse items-center\",children:[/*#__PURE__*/_jsxs(motion.button,{variants:buttonVariants,whileHover:\"hover\",whileTap:\"tap\",onClick:()=>openModal('edit',user._id,user),className:\"bg-purple-600 text-white px-1 sm:px-2 py-1 rounded-lg hover:bg-purple-700 transition-all duration-300 text-xs font-semibold shadow-sm flex-1 min-w-[40px]\",children:[/*#__PURE__*/_jsx(Edit2,{className:\"h-3 w-3 sm:h-4 sm:w-4 inline-block ml-1\"}),\"\\u062A\\u0639\\u062F\\u064A\\u0644\"]}),/*#__PURE__*/_jsxs(motion.button,{variants:buttonVariants,whileHover:\"hover\",whileTap:\"tap\",onClick:()=>openDeleteConfirm(user._id,user.name),className:\"bg-red-600 text-white px-1 sm:px-2 py-1 rounded-lg hover:bg-red-700 transition-all duration-300 text-xs font-semibold shadow-sm flex-1 min-w-[40px]\",children:[/*#__PURE__*/_jsx(Trash2,{className:\"h-3 w-3 sm:h-4 sm:w-4 inline-block ml-1\"}),\"\\u062D\\u0630\\u0641\"]})]})]},user._id);})})]})}):!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-purple-600 text-xs sm:text-sm font-semibold\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u0648\\u0638\\u0641\\u064A\\u0646 \\u0645\\u062A\\u0627\\u062D\\u0629\"}),/*#__PURE__*/_jsx(AnimatePresence,{children:modal.isOpen&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-2 sm:p-4\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{scale:0.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.8,opacity:0},transition:{duration:0.3,ease:'easeInOut'},className:\"bg-white p-4 sm:p-6 rounded-2xl shadow-2xl w-full max-w-[90vw] sm:max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-100\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-base sm:text-lg md:text-xl font-semibold text-purple-600 mb-3 text-right\",children:[modal.type==='edit'&&'تعديل بيانات الموظف',modal.type==='percentageIncreaseTotal'&&'زيادة نسبة على الراتب الإجمالي',modal.type==='percentageIncreaseBasic'&&'زيادة نسبة على الراتب الأساسي',modal.type==='bonusPercentage'&&'تعديل نسبة الحافز',modal.type==='basicBonus'&&'تعديل الحافز الأساسي',modal.type==='mealAllowance'&&'تعديل بدل الوجبة',modal.type==='medicalInsurance'&&'تعديل التأمين الطبي',modal.type==='socialInsurance'&&'تعديل التأمين الاجتماعي',modal.type==='annualLeaveBalance'&&'تعديل رصيد الإجازة']}),modal.type==='edit'?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0628\\u0627\\u0644\\u0628\\u062F\\u0644\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.totalSalaryWithAllowances,onChange:e=>setModal({...modal,formData:{...modal.formData,totalSalaryWithAllowances:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0628\\u0627\\u0644\\u0628\\u062F\\u0644\\u0627\\u062A\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,onBlur:calculateNetSalaryPreview})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0627\\u0644\\u0623\\u0633\\u0627\\u0633\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.basicSalary,onChange:e=>setModal({...modal,formData:{...modal.formData,basicSalary:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0627\\u0644\\u0623\\u0633\\u0627\\u0633\\u064A\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,onBlur:calculateNetSalaryPreview})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u062D\\u0627\\u0641\\u0632 (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.bonusPercentage,onChange:e=>setModal({...modal,formData:{...modal.formData,bonusPercentage:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u062D\\u0627\\u0641\\u0632\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,onBlur:calculateNetSalaryPreview})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0641\\u0632 \\u0627\\u0644\\u0623\\u0633\\u0627\\u0633\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.basicBonus,onChange:e=>setModal({...modal,formData:{...modal.formData,basicBonus:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u062D\\u0627\\u0641\\u0632 \\u0627\\u0644\\u0623\\u0633\\u0627\\u0633\\u064A\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,onBlur:calculateNetSalaryPreview})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0628\\u062F\\u0644 \\u0627\\u0644\\u0648\\u062C\\u0628\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.mealAllowance,onChange:e=>setModal({...modal,formData:{...modal.formData,mealAllowance:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0628\\u062F\\u0644 \\u0627\\u0644\\u0648\\u062C\\u0628\\u0629\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,onBlur:calculateNetSalaryPreview})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0627\\u0644\\u062A\\u0623\\u0645\\u064A\\u0646 \\u0627\\u0644\\u0637\\u0628\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.medicalInsurance,onChange:e=>setModal({...modal,formData:{...modal.formData,medicalInsurance:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u062A\\u0623\\u0645\\u064A\\u0646 \\u0627\\u0644\\u0637\\u0628\\u064A\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,onBlur:calculateNetSalaryPreview})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0627\\u0644\\u062A\\u0623\\u0645\\u064A\\u0646 \\u0627\\u0644\\u0627\\u062C\\u062A\\u0645\\u0627\\u0639\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.socialInsurance,onChange:e=>setModal({...modal,formData:{...modal.formData,socialInsurance:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u062A\\u0623\\u0645\\u064A\\u0646 \\u0627\\u0644\\u0627\\u062C\\u062A\\u0645\\u0627\\u0639\\u064A\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,onBlur:calculateNetSalaryPreview})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0625\\u062C\\u0627\\u0632\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.annualLeaveBalance,onChange:e=>setModal({...modal,formData:{...modal.formData,annualLeaveBalance:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0625\\u062C\\u0627\\u0632\\u0629\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:modal.formData.password,onChange:e=>setModal({...modal,formData:{...modal.formData,password:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0634\\u064A\\u0641\\u062A\"}),/*#__PURE__*/_jsxs(\"select\",{value:modal.selectedShift,onChange:handleShiftChange,className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0634\\u064A\\u0641\\u062A\"}),shifts.map(shift=>/*#__PURE__*/_jsxs(\"option\",{value:shift._id,children:[shift.shiftName,\" (\",shift.shiftType==='morning'?'صباحي':shift.shiftType==='evening'?'مسائي':'24/24',\")\"]},shift._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0639\\u062F\\u062F \\u0623\\u064A\\u0627\\u0645 \\u0627\\u0644\\u0639\\u0645\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:modal.formData.workDays||'',readOnly:true,className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm bg-gray-100 text-gray-600 shadow-sm\",disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0645\\u0639\\u0627\\u064A\\u0646\\u0629 \\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0627\\u0644\\u0635\\u0627\\u0641\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:modal.formData.netSalaryPreview,readOnly:true,className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm bg-gray-100 text-gray-600 shadow-sm\",disabled:true})]})]})}):modal.type==='percentageIncreaseTotal'?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0632\\u064A\\u0627\\u062F\\u0629 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.percentageIncreaseTotal,onChange:e=>setModal({...modal,formData:{...modal.formData,percentageIncreaseTotal:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0646\\u0633\\u0628\\u0629 (%)\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading})]}):modal.type==='percentageIncreaseBasic'?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u0632\\u064A\\u0627\\u062F\\u0629 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0631\\u0627\\u062A\\u0628 \\u0627\\u0644\\u0623\\u0633\\u0627\\u0633\\u064A (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData.percentageIncreaseBasic,onChange:e=>setModal({...modal,formData:{...modal.formData,percentageIncreaseBasic:e.target.value}}),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0646\\u0633\\u0628\\u0629 (%)\",className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\",children:modal.type==='bonusPercentage'?'نسبة الحافز (%)':'القيمة'}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:modal.formData[modal.type],onChange:e=>setModal({...modal,formData:{...modal.formData,[modal.type]:e.target.value}}),placeholder:modal.type==='bonusPercentage'?'أدخل النسبة (%)':'أدخل القيمة',className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\",disabled:loading,onBlur:modal.type!=='annualLeaveBalance'?calculateNetSalaryPreview:undefined})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 space-x-reverse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:modal.applyToAll,onChange:e=>setModal({...modal,applyToAll:e.target.checked}),className:\"h-4 w-4 text-purple-600 focus:ring-purple-500 rounded\",disabled:loading}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs sm:text-sm font-semibold text-gray-800\",children:\"\\u062A\\u0637\\u0628\\u064A\\u0642 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062C\\u0645\\u064A\\u0639\"})]})}),modal.applyToAll&&/*#__PURE__*/_jsxs(\"select\",{value:modal.selectedShift,onChange:handleShiftChange,className:\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white mt-3 shadow-sm\",disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0643\\u0644 \\u0627\\u0644\\u0634\\u064A\\u0641\\u062A\\u0627\\u062A\"}),shifts.map(shift=>/*#__PURE__*/_jsx(\"option\",{value:shift._id,children:shift.shiftName},shift._id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-between space-x-4 space-x-reverse mt-4 gap-4\",children:[modal.type==='edit'&&/*#__PURE__*/_jsx(motion.button,{variants:buttonVariants,whileHover:\"hover\",whileTap:\"tap\",type:\"button\",onClick:calculateNetSalaryPreview,className:\"bg-blue-600 text-white px-2 sm:px-3 py-2 rounded-lg hover:bg-blue-700 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 min-w-[100px] shadow-sm\",disabled:loading,children:\"\\u062D\\u0633\\u0627\\u0628 \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsx(motion.button,{variants:buttonVariants,whileHover:\"hover\",whileTap:\"tap\",onClick:handleUpdate,className:\"bg-purple-600 text-white px-2 sm:px-3 py-2 rounded-lg hover:bg-purple-700 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 min-w-[100px] shadow-sm\",disabled:loading,children:\"\\u062A\\u0623\\u0643\\u064A\\u062F\"}),/*#__PURE__*/_jsx(motion.button,{variants:buttonVariants,whileHover:\"hover\",whileTap:\"tap\",onClick:closeModal,className:\"bg-gray-200 text-gray-800 px-2 sm:px-3 py-2 rounded-lg hover:bg-gray-300 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 min-w-[100px] shadow-sm\",disabled:loading,children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:showDeleteConfirm.isOpen&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-2 sm:p-4\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{scale:0.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.8,opacity:0},transition:{duration:0.3,ease:'easeInOut'},className:\"bg-white p-4 sm:p-6 rounded-2xl shadow-2xl w-full max-w-[90vw] sm:max-w-md border border-gray-100\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-base sm:text-lg md:text-xl font-semibold text-purple-600 mb-3 text-right\",children:\"\\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062D\\u0630\\u0641\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-right text-xs sm:text-sm text-gray-800 mb-4\",children:[\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641 \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:showDeleteConfirm.userName}),\"\\u061F\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between space-x-2 sm:space-x-3 space-x-reverse gap-4\",children:[/*#__PURE__*/_jsx(motion.button,{variants:buttonVariants,whileHover:\"hover\",whileTap:\"tap\",onClick:handleDelete,className:\"bg-red-600 text-white px-2 sm:px-3 py-2 rounded-lg hover:bg-red-700 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 shadow-sm\",disabled:loading,children:\"\\u062D\\u0630\\u0641\"}),/*#__PURE__*/_jsx(motion.button,{variants:buttonVariants,whileHover:\"hover\",whileTap:\"tap\",onClick:closeDeleteConfirm,className:\"bg-gray-200 text-gray-800 px-2 sm:px-3 py-2 rounded-lg hover:bg-gray-300 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 shadow-sm\",disabled:loading,children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:showSuccessAnimation&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.5,rotate:-90},animate:{opacity:1,scale:1,rotate:0,transition:{duration:0.6,ease:'easeOut'}},exit:{opacity:0,scale:0.5,rotate:90,transition:{duration:0.4,ease:'easeIn'}},className:\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50\",children:/*#__PURE__*/_jsx(CustomCheckIcon,{})})})]})})});}export default EditUser;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","Search","Percent","DollarSign","Utensils","Shield","Briefcase","Calendar","Edit2","Trash2","jsx","_jsx","jsxs","_jsxs","CustomCheckIcon","div","className","initial","scale","opacity","animate","transition","duration","ease","type","stiffness","damping","exit","children","svg","fill","viewBox","stroke","strokeWidth","pathLength","rotate","strokeLinecap","strokeLinejoin","d","CustomLoadingSpinner","repeat","Infinity","EditUser","users","setUsers","filteredUsers","setFilteredUsers","shifts","setShifts","searchQuery","setSearchQuery","excludedUsers","setExcludedUsers","modal","setModal","isOpen","userId","formData","totalSalaryWithAllowances","basicSalary","bonusPercentage","basicBonus","mealAllowance","medicalInsurance","socialInsurance","annualLeaveBalance","percentageIncreaseTotal","percentageIncreaseBasic","password","netSalaryPreview","applyToAll","selectedShift","loading","setLoading","error","setError","successMessage","setSuccessMessage","showSuccessAnimation","setShowSuccessAnimation","showDeleteConfirm","setShowDeleteConfirm","userName","fetchData","usersResponse","fetch","process","env","REACT_APP_API_URL","headers","Authorization","localStorage","getItem","ok","Error","status","usersData","json","err","console","message","shiftsResponse","warn","statusText","shiftsData","shiftErr","result","filter","user","employeeCode","toLowerCase","includes","name","openModal","userData","_userData$shiftType","netSalary","parseFloat","toFixed","toString","shiftType","_id","closeModal","openDeleteConfirm","closeDeleteConfirm","handleExcludeToggle","prev","id","calculateNetSalaryPreview","ts","bb","bp","ma","mi","si","net","handleUpdate","updates","find","u","parseInt","response","method","body","JSON","stringify","isNaN","percentage","annualIncreasePercentage","undefined","basicIncreasePercentage","setTimeout","handleDelete","handleShiftChange","e","selectedShiftId","target","value","shift","workDaysValue","Array","isArray","workDays","length","buttonVariants","hover","boxShadow","tap","backgroundColor","style","scrollBehavior","y","onChange","placeholder","disabled","label","icon","map","Icon","button","variants","whileHover","whileTap","onClick","_user$shiftType","_user$totalSalaryWith","_user$basicSalary","_user$basicBonus","_user$bonusPercentage","_user$mealAllowance","_user$medicalInsuranc","_user$socialInsurance","_user$annualLeaveBala","tr","checked","department","shiftName","onBlur","readOnly"],"sources":["/root/NileMIX-System_HR/frontend/src/components/EditUser.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Search, Percent, DollarSign, Utensils, Shield, Briefcase, Calendar, Edit2, Trash2 } from 'lucide-react';\n\nconst CustomCheckIcon = () => (\n  <motion.div\n    className=\"relative h-12 w-12 sm:h-16 sm:w-16\"\n    initial={{ scale: 0, opacity: 0 }}\n    animate={{ scale: 1, opacity: 1, transition: { duration: 0.6, ease: 'easeInOut', type: 'spring', stiffness: 150, damping: 12 } }}\n    exit={{ scale: 0, opacity: 0, transition: { duration: 0.4, ease: 'easeIn' } }}\n  >\n    <motion.svg\n      className=\"h-full w-full text-purple-600\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      stroke=\"currentColor\"\n      strokeWidth={3}\n      initial={{ pathLength: 0, rotate: -45 }}\n      animate={{ pathLength: 1, rotate: 0, transition: { duration: 0.8, ease: 'easeInOut' } }}\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n    </motion.svg>\n    <motion.div\n      className=\"absolute inset-0 rounded-full bg-purple-100 opacity-40\"\n      initial={{ scale: 0 }}\n      animate={{ scale: 1.8, opacity: 0, transition: { duration: 1.2, ease: 'easeOut' } }}\n    />\n  </motion.div>\n);\n\nconst CustomLoadingSpinner = () => (\n  <motion.div\n    className=\"flex items-center justify-center\"\n    initial={{ opacity: 0, scale: 0.8 }}\n    animate={{ opacity: 1, scale: 1, transition: { duration: 0.4, ease: 'easeIn' } }}\n    exit={{ opacity: 0, scale: 0.8, transition: { duration: 0.4, ease: 'easeOut' } }}\n  >\n    <motion.div\n      className=\"h-8 w-8 sm:h-10 sm:w-10 border-4 border-purple-600 border-t-transparent rounded-full\"\n      animate={{ rotate: 360 }}\n      transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n    />\n    <span className=\"mr-2 sm:mr-3 text-purple-600 text-xs sm:text-sm font-medium\">جارٍ التحميل...</span>\n  </motion.div>\n);\n\nfunction EditUser() {\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [shifts, setShifts] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [excludedUsers, setExcludedUsers] = useState([]);\n  const [modal, setModal] = useState({\n    isOpen: false,\n    type: '',\n    userId: null,\n    formData: {\n      totalSalaryWithAllowances: '',\n      basicSalary: '',\n      bonusPercentage: '',\n      basicBonus: '',\n      mealAllowance: '',\n      medicalInsurance: '',\n      socialInsurance: '',\n      annualLeaveBalance: '',\n      percentageIncreaseTotal: '',\n      percentageIncreaseBasic: '',\n      password: '',\n      netSalaryPreview: '',\n    },\n    applyToAll: false,\n    selectedShift: '',\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [showSuccessAnimation, setShowSuccessAnimation] = useState(false);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState({ isOpen: false, userId: null, userName: '' });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      try {\n        const usersResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/user`, {\n          headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n        });\n        if (!usersResponse.ok) {\n          throw new Error(`فشل جلب الموظفين! حالة HTTP: ${usersResponse.status}`);\n        }\n        const usersData = await usersResponse.json();\n        setUsers(usersData);\n        setFilteredUsers(usersData);\n      } catch (err) {\n        console.error('خطأ في جلب الموظفين:', err);\n        setError(`حدث خطأ أثناء جلب بيانات الموظفين: ${err.message}`);\n      }\n\n      try {\n        const shiftsResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/shift`, {\n          headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n        });\n        if (!shiftsResponse.ok) {\n          console.warn(`فشل جلب الشيفتات! حالة HTTP: ${shiftsResponse.status}`);\n          setError(`حدث خطأ في جلب الشيفتات: ${shiftsResponse.statusText || 'خطأ داخلي'}`);\n          setShifts([]);\n        } else {\n          const shiftsData = await shiftsResponse.json();\n          setShifts(shiftsData);\n        }\n      } catch (shiftErr) {\n        console.warn('خطأ في جلب الشيفتات:', shiftErr.message);\n        setError(`حدث خطأ في جلب الشيفتات: ${shiftErr.message}`);\n        setShifts([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    let result = users;\n    if (searchQuery) {\n      result = result.filter(\n        (user) =>\n          user.employeeCode.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          user.name.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n    setFilteredUsers(result);\n  }, [searchQuery, users]);\n\n  const openModal = (type, userId = null, userData = {}) => {\n    const netSalary = userData.totalSalaryWithAllowances != null\n      ? (\n          (parseFloat(userData.totalSalaryWithAllowances) || 0) +\n          ((parseFloat(userData.basicBonus) || 0) * (parseFloat(userData.bonusPercentage) || 0) / 100) +\n          (parseFloat(userData.mealAllowance) || 0) -\n          (parseFloat(userData.medicalInsurance) || 0) -\n          (parseFloat(userData.socialInsurance) || 0)\n        ).toFixed(2)\n      : '0.00';\n    setModal({\n      isOpen: true,\n      type,\n      userId,\n      formData: {\n        totalSalaryWithAllowances: userData.totalSalaryWithAllowances != null ? userData.totalSalaryWithAllowances.toString() : '',\n        basicSalary: userData.basicSalary != null ? userData.basicSalary.toString() : '',\n        bonusPercentage: userData.bonusPercentage != null ? userData.bonusPercentage.toString() : '',\n        basicBonus: userData.basicBonus != null ? userData.basicBonus.toString() : '',\n        mealAllowance: userData.mealAllowance != null ? userData.mealAllowance.toString() : '',\n        medicalInsurance: userData.medicalInsurance != null ? userData.medicalInsurance.toString() : '',\n        socialInsurance: userData.socialInsurance != null ? userData.socialInsurance.toString() : '',\n        annualLeaveBalance: userData.annualLeaveBalance != null ? userData.annualLeaveBalance.toString() : '',\n        percentageIncreaseTotal: '',\n        percentageIncreaseBasic: '',\n        password: '',\n        netSalaryPreview: netSalary,\n      },\n      applyToAll: false,\n      selectedShift: userData.shiftType?._id || '',\n    });\n  };\n\n  const closeModal = () => {\n    setModal({\n      isOpen: false,\n      type: '',\n      userId: null,\n      formData: {\n        totalSalaryWithAllowances: '',\n        basicSalary: '',\n        bonusPercentage: '',\n        basicBonus: '',\n        mealAllowance: '',\n        medicalInsurance: '',\n        socialInsurance: '',\n        annualLeaveBalance: '',\n        percentageIncreaseTotal: '',\n        percentageIncreaseBasic: '',\n        password: '',\n        netSalaryPreview: '',\n      },\n      applyToAll: false,\n      selectedShift: '',\n    });\n  };\n\n  const openDeleteConfirm = (userId, userName) => {\n    setShowDeleteConfirm({ isOpen: true, userId, userName });\n  };\n\n  const closeDeleteConfirm = () => {\n    setShowDeleteConfirm({ isOpen: false, userId: null, userName: '' });\n  };\n\n  const handleExcludeToggle = (userId) => {\n    setExcludedUsers((prev) =>\n      prev.includes(userId)\n        ? prev.filter((id) => id !== userId)\n        : [...prev, userId]\n    );\n  };\n\n  const calculateNetSalaryPreview = () => {\n    const { formData } = modal;\n    const ts = parseFloat(formData.totalSalaryWithAllowances) || 0;\n    const bb = parseFloat(formData.basicBonus) || 0;\n    const bp = parseFloat(formData.bonusPercentage) || 0;\n    const ma = parseFloat(formData.mealAllowance) || 0;\n    const mi = parseFloat(formData.medicalInsurance) || 0;\n    const si = parseFloat(formData.socialInsurance) || 0;\n    const net = ts + (bb * bp / 100) + ma - mi - si;\n    setModal({\n      ...modal,\n      formData: { ...modal.formData, netSalaryPreview: net.toFixed(2) },\n    });\n  };\n\n  const handleUpdate = async () => {\n    const { type, userId, formData, applyToAll, selectedShift } = modal;\n    setLoading(true);\n    setError('');\n    try {\n      const updates = {};\n      const user = users.find((u) => u._id === userId);\n\n      if (type === 'edit') {\n        updates.totalSalaryWithAllowances = formData.totalSalaryWithAllowances ? parseFloat(formData.totalSalaryWithAllowances) : user?.totalSalaryWithAllowances || 0;\n        updates.basicSalary = formData.basicSalary ? parseFloat(formData.basicSalary) : user?.basicSalary || 0;\n        updates.bonusPercentage = formData.bonusPercentage ? parseFloat(formData.bonusPercentage) : user?.bonusPercentage || 0;\n        updates.basicBonus = formData.basicBonus ? parseFloat(formData.basicBonus) : user?.basicBonus || 0;\n        updates.mealAllowance = formData.mealAllowance ? parseFloat(formData.mealAllowance) : user?.mealAllowance || 0;\n        updates.medicalInsurance = formData.medicalInsurance ? parseFloat(formData.medicalInsurance) : user?.medicalInsurance || 0;\n        updates.socialInsurance = formData.socialInsurance ? parseFloat(formData.socialInsurance) : user?.socialInsurance || 0;\n        updates.annualLeaveBalance = formData.annualLeaveBalance ? parseInt(formData.annualLeaveBalance) : user?.annualLeaveBalance || 0;\n        updates.netSalary = parseFloat(\n          (updates.totalSalaryWithAllowances || 0) +\n          ((updates.basicBonus || 0) * (updates.bonusPercentage || 0) / 100) +\n          (updates.mealAllowance || 0) -\n          (updates.medicalInsurance || 0) -\n          (updates.socialInsurance || 0)\n        ).toFixed(2);\n\n        if (formData.password) updates.password = formData.password;\n\n        const response = await fetch(`${process.env.REACT_APP_API_URL}/api/user/update/${userId}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n          body: JSON.stringify(updates),\n        });\n\n        if (!response.ok) throw new Error(`فشل التحديث! حالة HTTP: ${response.status}`);\n      } else if (type === 'percentageIncreaseTotal') {\n        if (!formData.percentageIncreaseTotal || isNaN(formData.percentageIncreaseTotal) || formData.percentageIncreaseTotal < 0) {\n          setError('يرجى إدخال نسبة زيادة على الراتب الإجمالي صحيحة');\n          setLoading(false);\n          return;\n        }\n        const percentage = parseFloat(formData.percentageIncreaseTotal);\n        if (applyToAll) {\n          await fetch(`${process.env.REACT_APP_API_URL}/api/user/update-many`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n            body: JSON.stringify({\n              annualIncreasePercentage: percentage,\n              shiftType: selectedShift || undefined,\n              excludedUsers,\n            }),\n          });\n        } else if (userId) {\n          const user = users.find((u) => u._id === userId);\n          updates.totalSalaryWithAllowances = (user.totalSalaryWithAllowances || 0) * (1 + percentage / 100);\n          updates.netSalary = parseFloat(\n            updates.totalSalaryWithAllowances +\n            ((user.basicBonus || 0) * (user.bonusPercentage || 0) / 100) +\n            (user.mealAllowance || 0) -\n            (user.medicalInsurance || 0) -\n            (user.socialInsurance || 0)\n          ).toFixed(2);\n          await fetch(`${process.env.REACT_APP_API_URL}/api/user/update/${userId}`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n            body: JSON.stringify(updates),\n          });\n        }\n      } else if (type === 'percentageIncreaseBasic') {\n        if (!formData.percentageIncreaseBasic || isNaN(formData.percentageIncreaseBasic) || formData.percentageIncreaseBasic < 0) {\n          setError('يرجى إدخال نسبة زيادة على الراتب الأساسي صحيحة');\n          setLoading(false);\n          return;\n        }\n        const percentage = parseFloat(formData.percentageIncreaseBasic);\n        if (applyToAll) {\n          await fetch(`${process.env.REACT_APP_API_URL}/api/user/update-many`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n            body: JSON.stringify({\n              basicIncreasePercentage: percentage,\n              shiftType: selectedShift || undefined,\n              excludedUsers,\n            }),\n          });\n        } else if (userId) {\n          const user = users.find((u) => u._id === userId);\n          updates.basicSalary = (user.basicSalary || 0) * (1 + percentage / 100);\n          await fetch(`${process.env.REACT_APP_API_URL}/api/user/update/${userId}`, {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n            body: JSON.stringify(updates),\n          });\n        }\n      } else {\n        updates[type] = type === 'annualLeaveBalance' ? parseInt(formData[type]) : parseFloat(formData[type]);\n        if (['bonusPercentage', 'basicBonus', 'mealAllowance', 'medicalInsurance', 'socialInsurance'].includes(type)) {\n          const user = users.find((u) => u._id === userId) || {};\n          const ts = user.totalSalaryWithAllowances || 0;\n          const bb = updates.basicBonus || user.basicBonus || 0;\n          const bp = updates.bonusPercentage || user.bonusPercentage || 0;\n          const ma = updates.mealAllowance || user.mealAllowance || 0;\n          const mi = updates.medicalInsurance || user.medicalInsurance || 0;\n          const si = updates.socialInsurance || user.socialInsurance || 0;\n          updates.netSalary = parseFloat(ts + (bb * bp / 100) + ma - mi - si).toFixed(2);\n        }\n\n        if (!updates[type] || isNaN(updates[type]) || updates[type] < 0) {\n          setError('يرجى إدخال قيمة صحيحة وغير سالبة');\n          setLoading(false);\n          return;\n        }\n\n        await fetch(`${process.env.REACT_APP_API_URL}/api/user/update-many`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n          body: JSON.stringify({\n            updates,\n            shiftType: applyToAll ? selectedShift : undefined,\n            excludedUsers: applyToAll ? excludedUsers : undefined,\n          }),\n        });\n      }\n\n      const usersResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/user`, {\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n      });\n      if (!usersResponse.ok) {\n        throw new Error(`فشل جلب الموظفين بعد التحديث! حالة HTTP: ${usersResponse.status}`);\n      }\n      const usersData = await usersResponse.json();\n      setUsers(usersData);\n      setFilteredUsers(usersData);\n      setExcludedUsers([]);\n      setSuccessMessage(type === 'edit' ? 'تم تعديل الموظف بنجاح' : 'تم تحديث البيانات بنجاح');\n      setShowSuccessAnimation(true);\n      setTimeout(() => {\n        setShowSuccessAnimation(false);\n        setSuccessMessage('');\n      }, 2000);\n      closeModal();\n    } catch (err) {\n      console.error('خطأ في تحديث البيانات:', err);\n      setError(`حدث خطأ أثناء التحديث: ${err.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    const { userId } = showDeleteConfirm;\n    setLoading(true);\n    setError('');\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/user/delete/${userId}`, {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n      });\n      if (!response.ok) {\n        throw new Error(`فشل حذف الموظف! حالة HTTP: ${response.status}`);\n      }\n      const usersResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/user`, {\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${localStorage.getItem('token')}` },\n      });\n      if (!usersResponse.ok) {\n        throw new Error(`فشل جلب الموظفين بعد الحذف! حالة HTTP: ${usersResponse.status}`);\n      }\n      const usersData = await usersResponse.json();\n      setUsers(usersData);\n      setFilteredUsers(usersData);\n      setSuccessMessage('تم حذف الموظف بنجاح');\n      setShowSuccessAnimation(true);\n      setTimeout(() => {\n        setShowSuccessAnimation(false);\n        setSuccessMessage('');\n      }, 2000);\n      closeDeleteConfirm();\n    } catch (err) {\n      console.error('خطأ في حذف الموظف:', err);\n      setError(`حدث خطأ أثناء الحذف: ${err.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleShiftChange = (e) => {\n    const selectedShiftId = e.target.value;\n    setModal({ ...modal, selectedShift: selectedShiftId });\n    const selectedShift = shifts.find((shift) => shift._id === selectedShiftId);\n    if (selectedShift) {\n      const workDaysValue = Array.isArray(selectedShift.workDays)\n        ? selectedShift.workDays.length\n        : selectedShift.workDays || 30;\n      setModal({ ...modal, formData: { ...modal.formData, workDays: workDaysValue.toString() } });\n    } else {\n      setModal({ ...modal, formData: { ...modal.formData, workDays: '' } });\n    }\n  };\n\n  const buttonVariants = {\n    hover: { scale: 1.05, boxShadow: '0 6px 25px rgba(139, 92, 246, 0.3)', transition: { duration: 0.3, ease: 'easeInOut' } },\n    tap: { scale: 0.95, backgroundColor: '#A78BFA', transition: { duration: 0.3, ease: 'easeInOut' } },\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-100 via-purple-50 to-blue-100 p-2 sm:p-4 md:p-6 font-noto-sans-arabic relative overflow-hidden dir=rtl\" style={{ scrollBehavior: 'smooth' }}>\n      <div className=\"container mx-auto max-w-7xl\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, ease: 'easeOut' }}\n          className=\"bg-white rounded-2xl shadow-md p-4 sm:p-6 border border-gray-100\"\n        >\n          <h2 className=\"text-xl sm:text-2xl md:text-3xl font-bold text-purple-600 mb-4 sm:mb-6 text-right tracking-wide drop-shadow-sm\">تعديل حساب</h2>\n          <AnimatePresence>\n            {error && (\n              <motion.div\n                initial={{ opacity: 0, y: -10 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -10 }}\n                transition={{ duration: 0.3 }}\n                className=\"bg-red-100 text-red-700 p-2 sm:p-3 rounded-xl mb-4 sm:mb-6 text-right text-xs sm:text-sm font-semibold shadow-sm\"\n              >\n                {error}\n              </motion.div>\n            )}\n            {successMessage && !loading && (\n              <motion.div\n                initial={{ opacity: 0, y: -10 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -10 }}\n                transition={{ duration: 0.3 }}\n                className=\"bg-purple-50 text-purple-600 p-2 sm:p-3 rounded-xl mb-4 sm:mb-6 text-right text-xs sm:text-sm font-semibold shadow-sm\"\n              >\n                {successMessage}\n              </motion.div>\n            )}\n          </AnimatePresence>\n          {loading && (\n            <div className=\"flex justify-center mb-4 sm:mb-6\">\n              <CustomLoadingSpinner />\n            </div>\n          )}\n          {!loading && users.length > 0 && (\n            <div className=\"mb-4 sm:mb-6\">\n              <div className=\"relative max-w-full sm:max-w-md mx-auto\">\n                <Search className=\"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-purple-600\" />\n                <input\n                  type=\"text\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  placeholder=\"ابحث بكود الموظف أو الاسم\"\n                  className=\"w-full px-3 sm:px-4 py-2 sm:py-3 pr-8 sm:pr-10 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                  disabled={loading}\n                />\n              </div>\n            </div>\n          )}\n          {!loading && users.length > 0 && (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 mb-4 sm:mb-6 max-w-5xl mx-auto\">\n              {[\n                { type: 'percentageIncreaseTotal', label: 'زيادة نسبة على الراتب الإجمالي', icon: Percent },\n                { type: 'percentageIncreaseBasic', label: 'زيادة نسبة على الراتب الأساسي', icon: Percent },\n                { type: 'bonusPercentage', label: 'نسبة الحافز', icon: Percent },\n                { type: 'basicBonus', label: 'حافز أساسي', icon: DollarSign },\n                { type: 'mealAllowance', label: 'بدل وجبة', icon: Utensils },\n                { type: 'medicalInsurance', label: 'تأمين طبي', icon: Shield },\n                { type: 'socialInsurance', label: 'تأمين اجتماعي', icon: Briefcase },\n                { type: 'annualLeaveBalance', label: 'رصيد الإجازة', icon: Calendar },\n              ].map(({ type, label, icon: Icon }) => (\n                <motion.button\n                  key={type}\n                  variants={buttonVariants}\n                  whileHover=\"hover\"\n                  whileTap=\"tap\"\n                  onClick={() => openModal(type)}\n                  className=\"flex items-center justify-center space-x-2 space-x-reverse bg-purple-600 text-white px-2 sm:px-3 py-2 rounded-lg hover:bg-purple-700 transition-all duration-300 text-xs sm:text-sm font-semibold shadow-md w-full text-center\"\n                  disabled={loading}\n                >\n                  <Icon className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n                  <span className=\"truncate\">{label}</span>\n                </motion.button>\n              ))}\n            </div>\n          )}\n          {!loading && users.length > 0 ? (\n            <div className=\"bg-white rounded-2xl shadow-md border border-gray-100 overflow-x-auto lg:overflow-x-visible max-w-full\">\n              <table className=\"w-full text-right text-xs sm:text-sm table-auto\">\n                <thead>\n                  <tr className=\"bg-purple-50\">\n                    <th className=\"p-2 sm:p-3 w-[4%] min-w-[40px] font-semibold text-purple-600\">استثناء</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">كود الموظف</th>\n                    <th className=\"p-2 sm:p-3 w-[9%] min-w-[70px] font-semibold text-purple-600\">الاسم</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">القسم</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">الشيفت</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">الراتب الإجمالي</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">الراتب الأساسي</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">الحافز الأساسي</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">نسبة الحافز</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">بدل الوجبة</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">التأمين الطبي</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">التأمين الاجتماعي</th>\n                    <th className=\"p-2 sm:p-3 w-[7%] min-w-[50px] font-semibold text-purple-600\">رصيد الإجازة</th>\n                    <th className=\"p-2 sm:p-3 w-[10%] min-w-[90px] font-semibold text-purple-600\">إجراءات</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredUsers.map((user) => (\n                    <motion.tr\n                      key={user._id}\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      transition={{ duration: 0.3 }}\n                      className=\"border-b border-purple-100 hover:bg-purple-50\"\n                    >\n                      <td className=\"p-2 sm:p-3\">\n                        <input\n                          type=\"checkbox\"\n                          checked={excludedUsers.includes(user._id)}\n                          onChange={() => handleExcludeToggle(user._id)}\n                          className=\"h-4 w-4 text-purple-600 focus:ring-purple-500 rounded\"\n                        />\n                      </td>\n                      <td className=\"p-2 sm:p-3\">{user.employeeCode}</td>\n                      <td className=\"p-2 sm:p-3\">{user.name}</td>\n                      <td className=\"p-2 sm:p-3\">{user.department}</td>\n                      <td className=\"p-2 sm:p-3\">{user.shiftType?.shiftName || 'غير محدد'}</td>\n                      <td className=\"p-2 sm:p-3\">{(user.totalSalaryWithAllowances ?? 0).toFixed(2)}</td>\n                      <td className=\"p-2 sm:p-3\">{(user.basicSalary ?? 0).toFixed(2)}</td>\n                      <td className=\"p-2 sm:p-3\">{(user.basicBonus ?? 0).toFixed(2)}</td>\n                      <td className=\"p-2 sm:p-3\">{(user.bonusPercentage ?? 0).toFixed(2)}%</td>\n                      <td className=\"p-2 sm:p-3\">{(user.mealAllowance ?? 0).toFixed(2)}</td>\n                      <td className=\"p-2 sm:p-3\">{(user.medicalInsurance ?? 0).toFixed(2)}</td>\n                      <td className=\"p-2 sm:p-3\">{(user.socialInsurance ?? 0).toFixed(2)}</td>\n                      <td className=\"p-2 sm:p-3\">{user.annualLeaveBalance ?? 0}</td>\n                      <td className=\"p-2 sm:p-3 flex space-x-1 space-x-reverse items-center\">\n                        <motion.button\n                          variants={buttonVariants}\n                          whileHover=\"hover\"\n                          whileTap=\"tap\"\n                          onClick={() => openModal('edit', user._id, user)}\n                          className=\"bg-purple-600 text-white px-1 sm:px-2 py-1 rounded-lg hover:bg-purple-700 transition-all duration-300 text-xs font-semibold shadow-sm flex-1 min-w-[40px]\"\n                        >\n                          <Edit2 className=\"h-3 w-3 sm:h-4 sm:w-4 inline-block ml-1\" />\n                          تعديل\n                        </motion.button>\n                        <motion.button\n                          variants={buttonVariants}\n                          whileHover=\"hover\"\n                          whileTap=\"tap\"\n                          onClick={() => openDeleteConfirm(user._id, user.name)}\n                          className=\"bg-red-600 text-white px-1 sm:px-2 py-1 rounded-lg hover:bg-red-700 transition-all duration-300 text-xs font-semibold shadow-sm flex-1 min-w-[40px]\"\n                        >\n                          <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4 inline-block ml-1\" />\n                          حذف\n                        </motion.button>\n                      </td>\n                    </motion.tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            !loading && <div className=\"text-center text-purple-600 text-xs sm:text-sm font-semibold\">لا توجد بيانات موظفين متاحة</div>\n          )}\n          <AnimatePresence>\n            {modal.isOpen && (\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-2 sm:p-4\"\n              >\n                <motion.div\n                  initial={{ scale: 0.8, opacity: 0 }}\n                  animate={{ scale: 1, opacity: 1 }}\n                  exit={{ scale: 0.8, opacity: 0 }}\n                  transition={{ duration: 0.3, ease: 'easeInOut' }}\n                  className=\"bg-white p-4 sm:p-6 rounded-2xl shadow-2xl w-full max-w-[90vw] sm:max-w-2xl max-h-[80vh] overflow-y-auto border border-gray-100\"\n                >\n                  <h3 className=\"text-base sm:text-lg md:text-xl font-semibold text-purple-600 mb-3 text-right\">\n                    {modal.type === 'edit' && 'تعديل بيانات الموظف'}\n                    {modal.type === 'percentageIncreaseTotal' && 'زيادة نسبة على الراتب الإجمالي'}\n                    {modal.type === 'percentageIncreaseBasic' && 'زيادة نسبة على الراتب الأساسي'}\n                    {modal.type === 'bonusPercentage' && 'تعديل نسبة الحافز'}\n                    {modal.type === 'basicBonus' && 'تعديل الحافز الأساسي'}\n                    {modal.type === 'mealAllowance' && 'تعديل بدل الوجبة'}\n                    {modal.type === 'medicalInsurance' && 'تعديل التأمين الطبي'}\n                    {modal.type === 'socialInsurance' && 'تعديل التأمين الاجتماعي'}\n                    {modal.type === 'annualLeaveBalance' && 'تعديل رصيد الإجازة'}\n                  </h3>\n                  {modal.type === 'edit' ? (\n                    <div className=\"space-y-3\">\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">إجمالي الراتب بالبدلات</label>\n                          <input\n                            type=\"number\"\n                            value={modal.formData.totalSalaryWithAllowances}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, totalSalaryWithAllowances: e.target.value } })}\n                            placeholder=\"أدخل إجمالي الراتب بالبدلات\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                            onBlur={calculateNetSalaryPreview}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">الراتب الأساسي</label>\n                          <input\n                            type=\"number\"\n                            value={modal.formData.basicSalary}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, basicSalary: e.target.value } })}\n                            placeholder=\"أدخل الراتب الأساسي\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                            onBlur={calculateNetSalaryPreview}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">نسبة الحافز (%)</label>\n                          <input\n                            type=\"number\"\n                            value={modal.formData.bonusPercentage}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, bonusPercentage: e.target.value } })}\n                            placeholder=\"أدخل نسبة الحافز\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                            onBlur={calculateNetSalaryPreview}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">الحافز الأساسي</label>\n                          <input\n                            type=\"number\"\n                            value={modal.formData.basicBonus}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, basicBonus: e.target.value } })}\n                            placeholder=\"أدخل الحافز الأساسي\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                            onBlur={calculateNetSalaryPreview}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">بدل الوجبة</label>\n                          <input\n                            type=\"number\"\n                            value={modal.formData.mealAllowance}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, mealAllowance: e.target.value } })}\n                            placeholder=\"أدخل بدل الوجبة\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                            onBlur={calculateNetSalaryPreview}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">التأمين الطبي</label>\n                          <input\n                            type=\"number\"\n                            value={modal.formData.medicalInsurance}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, medicalInsurance: e.target.value } })}\n                            placeholder=\"أدخل التأمين الطبي\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                            onBlur={calculateNetSalaryPreview}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">التأمين الاجتماعي</label>\n                          <input\n                            type=\"number\"\n                            value={modal.formData.socialInsurance}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, socialInsurance: e.target.value } })}\n                            placeholder=\"أدخل التأمين الاجتماعي\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                            onBlur={calculateNetSalaryPreview}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">رصيد الإجازة</label>\n                          <input\n                            type=\"number\"\n                            value={modal.formData.annualLeaveBalance}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, annualLeaveBalance: e.target.value } })}\n                            placeholder=\"أدخل رصيد الإجازة\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">كلمة المرور الجديدة</label>\n                          <input\n                            type=\"password\"\n                            value={modal.formData.password}\n                            onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, password: e.target.value } })}\n                            placeholder=\"أدخل كلمة المرور الجديدة\"\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">نوع الشيفت</label>\n                          <select\n                            value={modal.selectedShift}\n                            onChange={handleShiftChange}\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                            disabled={loading}\n                          >\n                            <option value=\"\">اختر الشيفت</option>\n                            {shifts.map((shift) => (\n                              <option key={shift._id} value={shift._id}>\n                                {shift.shiftName} ({shift.shiftType === 'morning' ? 'صباحي' : shift.shiftType === 'evening' ? 'مسائي' : '24/24'})\n                              </option>\n                            ))}\n                          </select>\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">عدد أيام العمل</label>\n                          <input\n                            type=\"text\"\n                            value={modal.formData.workDays || ''}\n                            readOnly\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm bg-gray-100 text-gray-600 shadow-sm\"\n                            disabled\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">معاينة الراتب الصافي</label>\n                          <input\n                            type=\"text\"\n                            value={modal.formData.netSalaryPreview}\n                            readOnly\n                            className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm bg-gray-100 text-gray-600 shadow-sm\"\n                            disabled\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  ) : modal.type === 'percentageIncreaseTotal' ? (\n                    <div className=\"space-y-3\">\n                      <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">نسبة الزيادة على الراتب الإجمالي (%)</label>\n                      <input\n                        type=\"number\"\n                        value={modal.formData.percentageIncreaseTotal}\n                        onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, percentageIncreaseTotal: e.target.value } })}\n                        placeholder=\"أدخل النسبة (%)\"\n                        className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                        disabled={loading}\n                      />\n                    </div>\n                  ) : modal.type === 'percentageIncreaseBasic' ? (\n                    <div className=\"space-y-3\">\n                      <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">نسبة الزيادة على الراتب الأساسي (%)</label>\n                      <input\n                        type=\"number\"\n                        value={modal.formData.percentageIncreaseBasic}\n                        onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, percentageIncreaseBasic: e.target.value } })}\n                        placeholder=\"أدخل النسبة (%)\"\n                        className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                        disabled={loading}\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      <label className=\"block text-xs sm:text-sm font-semibold text-gray-800 text-right\">\n                        {modal.type === 'bonusPercentage' ? 'نسبة الحافز (%)' : 'القيمة'}\n                      </label>\n                      <input\n                        type=\"number\"\n                        value={modal.formData[modal.type]}\n                        onChange={(e) => setModal({ ...modal, formData: { ...modal.formData, [modal.type]: e.target.value } })}\n                        placeholder={modal.type === 'bonusPercentage' ? 'أدخل النسبة (%)' : 'أدخل القيمة'}\n                        className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white shadow-sm\"\n                        disabled={loading}\n                        onBlur={modal.type !== 'annualLeaveBalance' ? calculateNetSalaryPreview : undefined}\n                      />\n                    </div>\n                  )}\n                  <div className=\"mt-3\">\n                    <label className=\"flex items-center space-x-2 space-x-reverse\">\n                      <input\n                        type=\"checkbox\"\n                        checked={modal.applyToAll}\n                        onChange={(e) => setModal({ ...modal, applyToAll: e.target.checked })}\n                        className=\"h-4 w-4 text-purple-600 focus:ring-purple-500 rounded\"\n                        disabled={loading}\n                      />\n                      <span className=\"text-xs sm:text-sm font-semibold text-gray-800\">تطبيق على الجميع</span>\n                    </label>\n                  </div>\n                  {modal.applyToAll && (\n                    <select\n                      value={modal.selectedShift}\n                      onChange={handleShiftChange}\n                      className=\"w-full px-2 sm:px-3 py-2 border border-purple-200 rounded-lg text-right text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-300 bg-white mt-3 shadow-sm\"\n                      disabled={loading}\n                    >\n                      <option value=\"\">كل الشيفتات</option>\n                      {shifts.map((shift) => (\n                        <option key={shift._id} value={shift._id}>\n                          {shift.shiftName}\n                        </option>\n                      ))}\n                    </select>\n                  )}\n                  <div className=\"flex flex-wrap justify-between space-x-4 space-x-reverse mt-4 gap-4\">\n                    {modal.type === 'edit' && (\n                      <motion.button\n                        variants={buttonVariants}\n                        whileHover=\"hover\"\n                        whileTap=\"tap\"\n                        type=\"button\"\n                        onClick={calculateNetSalaryPreview}\n                        className=\"bg-blue-600 text-white px-2 sm:px-3 py-2 rounded-lg hover:bg-blue-700 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 min-w-[100px] shadow-sm\"\n                        disabled={loading}\n                      >\n                        حساب الإجمالي\n                      </motion.button>\n                    )}\n                    <motion.button\n                      variants={buttonVariants}\n                      whileHover=\"hover\"\n                      whileTap=\"tap\"\n                      onClick={handleUpdate}\n                      className=\"bg-purple-600 text-white px-2 sm:px-3 py-2 rounded-lg hover:bg-purple-700 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 min-w-[100px] shadow-sm\"\n                      disabled={loading}\n                    >\n                      تأكيد\n                    </motion.button>\n                    <motion.button\n                      variants={buttonVariants}\n                      whileHover=\"hover\"\n                      whileTap=\"tap\"\n                      onClick={closeModal}\n                      className=\"bg-gray-200 text-gray-800 px-2 sm:px-3 py-2 rounded-lg hover:bg-gray-300 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 min-w-[100px] shadow-sm\"\n                      disabled={loading}\n                    >\n                      إلغاء\n                    </motion.button>\n                  </div>\n                </motion.div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n          <AnimatePresence>\n            {showDeleteConfirm.isOpen && (\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-2 sm:p-4\"\n              >\n                <motion.div\n                  initial={{ scale: 0.8, opacity: 0 }}\n                  animate={{ scale: 1, opacity: 1 }}\n                  exit={{ scale: 0.8, opacity: 0 }}\n                  transition={{ duration: 0.3, ease: 'easeInOut' }}\n                  className=\"bg-white p-4 sm:p-6 rounded-2xl shadow-2xl w-full max-w-[90vw] sm:max-w-md border border-gray-100\"\n                >\n                  <h3 className=\"text-base sm:text-lg md:text-xl font-semibold text-purple-600 mb-3 text-right\">تأكيد الحذف</h3>\n                  <p className=\"text-right text-xs sm:text-sm text-gray-800 mb-4\">\n                    هل أنت متأكد من حذف الموظف <span className=\"font-semibold\">{showDeleteConfirm.userName}</span>؟\n                  </p>\n                  <div className=\"flex justify-between space-x-2 sm:space-x-3 space-x-reverse gap-4\">\n                    <motion.button\n                      variants={buttonVariants}\n                      whileHover=\"hover\"\n                      whileTap=\"tap\"\n                      onClick={handleDelete}\n                      className=\"bg-red-600 text-white px-2 sm:px-3 py-2 rounded-lg hover:bg-red-700 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 shadow-sm\"\n                      disabled={loading}\n                    >\n                      حذف\n                    </motion.button>\n                    <motion.button\n                      variants={buttonVariants}\n                      whileHover=\"hover\"\n                      whileTap=\"tap\"\n                      onClick={closeDeleteConfirm}\n                      className=\"bg-gray-200 text-gray-800 px-2 sm:px-3 py-2 rounded-lg hover:bg-gray-300 transition-all duration-300 text-xs sm:text-sm font-semibold flex-1 shadow-sm\"\n                      disabled={loading}\n                    >\n                      إلغاء\n                    </motion.button>\n                  </div>\n                </motion.div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n          <AnimatePresence>\n            {showSuccessAnimation && (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.5, rotate: -90 }}\n                animate={{ opacity: 1, scale: 1, rotate: 0, transition: { duration: 0.6, ease: 'easeOut' } }}\n                exit={{ opacity: 0, scale: 0.5, rotate: 90, transition: { duration: 0.4, ease: 'easeIn' } }}\n                className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50\"\n              >\n                <CustomCheckIcon />\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n\nexport default EditUser;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}